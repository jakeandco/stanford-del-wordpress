{% embed '@partial/block_wrapper.twig' with { extra_classes: 'block_people-callout' } %}
  {% set accordion_id = block.anchor|default(block.id) %}
  {% set people = get_posts(fields.people) %}

  {% block content %}
    <div class="container">
      <h3 class="block-title">{{ fields.heading }}</h3>

      {% if fields.variation == 'accordion' %}

        {% embed "@views/partial/accordion.twig" with {
          rows: people,
          accordion_id,
        } %}
          {% block accordion_header %}
            {% include "@views/partial/media-item.twig" with { image: row.thumbnail } %}
            <p>{{ [row.meta('first_name'), row.meta('last_name')]|filter(v => v)|join(' ')|default(row.title) }}</p>
            <p>
              {% for item in row.meta('titles') %}
                <span>{{ item.title }}</span>
              {% endfor %}
            </p>
          {% endblock %}
          {% block accordion_body %}
            {% for item in row.meta('social_channels') %}
              <a href="{{ item.link.url }}">{{ item.link.title }}</a>
            {% endfor %}
            {{row.bio}}
          {% endblock %}
        {% endembed %}

      {% elseif fields.variation == 'listing' %}

        {% for row in people %}
          <div>
            {% include "@views/partial/media-item.twig" with { image: row.thumbnail } %}
            <p>{{ [row.meta('first_name'), row.meta('last_name')]|filter(v => v)|join(' ')|default(row.title) }}</p>
            <p>
              {% for item in row.meta('titles') %}
                <span>{{ item.title }}</span>
              {% endfor %}
            </p>
            {% for item in row.meta('social_channels') %}
              <a href="{{ item.link.url }}">{{ item.link.title }}</a>
            {% endfor %}
            {{row.bio}}
          </div>

        {% endfor %}

      {% endif %}
    </div>

  {% endblock %}
{% endembed %}
